---
title: "Interactive Dashboard"
format: html
execute:
  echo: FALSE
editor: visual
html:
  fig-width: 7
  fig-height: 5
---

#### AUTHORS

Nicholas Medizza, Santiago Camargo Carrillo, Joao Aires

# Introduction

The increasing amount of data in the football world create an opportunity to implement statistic analysis in order to try to find new patterns and develop models to predict for example number of goals scored and probability of winning.

Given that our data for this project are not well suited to develope statistic model, we decided to implement a descriptive statistical analysis.

The scope of this project is to develop an interactive dashboard with the aim to help football fans navigate through different plots and tables and discover how teams across different leagues performed from the season 2014/2015 to 2019/2020.

# Data

Our data were downloaded from the website Kaggle and the two main datasets that have been used are data from each given match played by teams in the top 5 european leagues. The second dataset contains the final position for each league across different years with related information. All the columns in the dataset and their respective meaning is reported below.

The standard columns are position, team, amount of matches played, wins, draws, loses, goals scored, goals missed, points.

Additional metrics are:

**npxG** - expected goals without penalties and own goals.

**xGA** - expected goals against.

**xGA_diff** - difference between actual goals missed and expected goals against.

**npxGA** - expected goals against without penalties and own goals.

**npxGD** - difference between "for" and "against" expected goals without penalties and own goals.

**ppda_coef** - passes allowed per defensive action in the opposition half (power of pressure)

**oppda_coef** - opponent passes allowed per defensive action in the opposition half (power of opponent's pressure)

**deep** - passes completed within an estimated 20 yards of goal (crosses excluded)

**deep_allowed** - opponent passes completed within an estimated 20 yards of goal (crosses excluded)

**xpts** - expected points

**xpts_diff** - difference between actual and expected points

Below are reported the first rows for the two dataset.

```{r, message = FALSE}
library(tidyverse)
data_per_club <- read_csv("data/understat_per_game.csv", show_col_types = FALSE)
data_per_game <- read_csv("data/understat.com.csv", show_col_types = FALSE)

# print the dataset with information per game 
print(as_tibble(data_per_club))

# print the dataset with information per club
print(as_tibble(data_per_game))


```

```{r}



```

```{r}



```

# eda

# analysis

## Dashboard Presentation

As mentioned in the introduction our analysis with statistics and graphs is reported on the interactive dashboard that we have built. The dashboard is the structure with three main pages: the team page, the league page and the comparison across different leagues.

![DashBoard](Report_Dashboard_files/screenshots_Dashboard/tab.png)

### Team page

Using the sidebar provided on the left the user can choose the season's year, the league and a specific team.

![Drop Down Menu](Report_Dashboard_files/screenshots_Dashboard/drop_down_menu.png){height="300" fig-align="left"}

The first information shown are probaly the most indicative of the performance of the selected team.

Are reported the final position in the ranking, number of wins and defeated for matches played at home and away.

![Value Boxe](Report_Dashboard_files/screenshots_Dashboard/Value_boxes.png)

The second main feature is the possibility to compare the performance of the principal team with an another selected team. A table shows for these two teams their historic results. Next to it there is a table race that compares their total points along the season. It gives us an indicator on the performance relative to the other team.

![DashBoard](Report_Dashboard_files/screenshots_Dashboard/head_to_head.png)

### Nation League page

The second page aims to give an overall understanding, for each of the five leagues, on how the teams performed relative to each others. The most important metric used are the difference of goal scored per ranking position, the expected goals for a team and the expected goal against.

Selecting the year and league on the left of the dashboard, the graphs will change the information.

![League Page](Report_Dashboard_files/screenshots_Dashboard/Leagues.png)

### Comparison across leagues

The last page of this dashboard aims to take into account all the five european in order to asses which leagues performed better and which one is the most competitive.

The user can choose if to show all the leagues or only a subset of them.

At the top of the page are shown the teams that won the competition for each league, with the most principal information like number of wins, goal, expected goals etc.

![Summary table](Report_Dashboard_files/screenshots_Dashboard/Comparison_leagues.png)

![Difference of goals for the first 10th ranked teams, average pressure per league](Report_Dashboard_files/screenshots_Dashboard/comparison_across_leagues2.png)

![Trend in expected goal per match played](Report_Dashboard_files/screenshots_Dashboard/comparison_leagues_3.png)

![Total goals and total expected goals scored for each winning team, Total points and Total expected points](Report_Dashboard_files/screenshots_Dashboard/Comparison_leagues4.png)

# conclusion
